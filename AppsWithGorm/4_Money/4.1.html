<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="4.2 - Document Editor" href="4.2.html" /><link rel="prev" title="4 - Money" href="index.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2024.01.29 -->
        <title>4.1 - The Basics - GNUstep Tutorials 2024 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">GNUstep Tutorials 2024 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">GNUstep Tutorials 2024 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../ObjectiveCIntro/index.html">Introduction to Objective-C</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Building Apps with GORM</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Building Apps with GORM</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../1_Intro/index.html">1 - Introduction to GNUstep Programming</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../2_Convertor/index.html">2 - Convertor</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 2 - Convertor</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../2_Convertor/2.1.html">2.1 - Designing the UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_Convertor/2.2.html">2.2 - Outlets and Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_Convertor/2.3.html">2.3 - Adding the Code</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../3_TimeMachine/index.html">3 - TimeMachine - a single window application</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 3 - TimeMachine - a single window application</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../3_TimeMachine/3.1.html">3.1 - A Basic Clock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3_TimeMachine/3.2.html">3.2 - Analog Clock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3_TimeMachine/3.3.html">3.3 - New Time Zone Dialog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3_TimeMachine/3.4.html">3.4 - Multiple Clocks</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">4 - Money</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 4 - Money</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">4.1 - The Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.2.html">4.2 - Document Editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.3.html">4.3 - Load and Save</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4.html">4.4 - Drag and Drop</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../5_Overview/index.html">5 - Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../6_LunarCalendar/index.html">6 - LunarCalendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7_NSLocalizationService/index.html">7 - NSLocalizationService</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Todo/index.html">Todo.app</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Todo.app</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Todo/Tutorial1.html">1 - Programming under GNUstep</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Todo/Tutorial2.html">2 - NSWindowController and Design Pattern MVC</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../HelpfulWebsites.html">Helpful Websites</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../AppsWithCodeOnly/index.html">Building Apps from Code Only</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Building Apps from Code Only</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/index.html">First Steps in GNUstep GUI Programming</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of First Steps in GNUstep GUI Programming</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/1_SharedApplication.html">1 - The shared application object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/2_AppIcon.html">2 - Setting your application’s icon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/3_Menus.html">3 - Menus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/4_PointsSizesRectangles.html">4 - Points, Sizes and Rectangles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/5_Windows.html">5 - Adding a Window to your Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/6_Buttons.html">6 - Adding a Button in the Window</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../AppsWithRenaissance/index.html">Building Apps with Renaissance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CommandLineTools/index.html">Command-Line Tools</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="the-basics">
<h1>4.1 - The Basics<a class="headerlink" href="#the-basics" title="Permalink to this heading">#</a></h1>
<p>Have you ever used a document-based application? I’d bet you have – document-based applications are one of the most common types of applications. Computers would be useless without them. Document-based applications are applications that interact with documents, such as text files, pictures, videos, and code. Web browsers are also document-based applications. In fact, document-based applications were invented long before computers – typewriters are essentially document-based applications, and you could argue that pen and paper are also document-based.</p>
<p>OpenStep, and therefore Cocoa and GNUstep, comes with built-in support for document-based applications in its Application Kit. This tutorial won’t cover everything you need to know about them – please read the <a class="reference external" href="https://web.archive.org/web/2004if_/http://developer.apple.com/documentation/Cocoa/Conceptual/Documents/index.html"><em>Cocoa document about document-based applications</em></a>.
Otherwise, you probably will not know what I
am doing.</p>
<p>Document-based apps look complicated at first – you have to deal with
<code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code>, <code class="docutils literal notranslate"><span class="pre">NSWindowController</span></code>, <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> and <code class="docutils literal notranslate"><span class="pre">NSWindow</span></code>.
However, since we’ll use Gorm to build the <code class="docutils literal notranslate"><span class="pre">NSWindow</span></code>, and
<code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code> and <code class="docutils literal notranslate"><span class="pre">NSWindowController</span></code> are not required to
subclass, <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> is the only class we have to deal with. That makes
everything very easy.</p>
<p>In this section, we only make the skeleton of the
document-based application. We’ll add more features in the next part of this tutorial.</p>
<section id="skeleton-user-interface">
<h2>Skeleton user interface<a class="headerlink" href="#skeleton-user-interface" title="Permalink to this heading">#</a></h2>
<p>Now, we have to create the main user interface. Since it’ i’s a
document-based application, there is no main window. We only need
a menu so that users can open, save and close each document.</p>
<p>Open Gorm, choose “Document→New Application”. Click the window in the
Gorm main window, use “Edit→Delete” to delete the window. Drag the
menus “Info” and “Document” into the main menu. The main user interface
will be like this:</p>
<p><span id="AEN915"></span></p>
<p><strong>Figure 4-32. Menu of document-based application</strong></p>
<p><img alt="" src="../../_images/Money-01.jpg" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Not having a main window can cause problems if you’re using a global or local menu bar, rather than a floating menu. Additionally, it’s not what users expect except on macOS. We’ll address these issues later.</p>
</div>
<p>Next, I need a <code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code>. Choose the class
<code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code>, and use menu item “Classes→Instantiate” to make an
instance.</p>
<p><span id="AEN922"></span></p>
<p><strong>Figure 4-33. Create instance of <code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code></strong></p>
<p><img alt="" src="../../_images/Money-02.jpg" /></p>
<p>The main user interface is done. Save it as “Money.gorm”.</p>
<p><code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code> will look at the property list of this application
in order to know what kind of document it should handle. Here is the property list we’ll be using:</p>
<p><code class="docutils literal notranslate"><span class="pre">MoneyInfo.plist</span></code></p>
<div class="highlight-plist notranslate"><div class="highlight"><pre><span></span>{
    ApplicationDescription = &quot;Money&quot;;
    ApplicationIcon = &quot;&quot;;
    ApplicationName = Money;
    ApplicationRelease = 0.1;
    Authors = &quot;&quot;;
    Copyright = &quot;Copyright (C) 200x by ...&quot;;
    CopyrightDescription = &quot;Released under...&quot;;
    FullVersionID = 0.1;
    URL = &quot;&quot;;
    NSTypes = (
        {
            NSName = &quot;mon&quot;;
            NSHumanReadableName = &quot;Money Document&quot;;
            NSUnixExtensions = (&quot;mon&quot;);
            NSRole = Editor;
            NSDocumentClass = Document;
        }
    );
}
</pre></div>
</div>
<p>The important part is that <code class="docutils literal notranslate"><span class="pre">NSTypes</span></code> defines what kinds of documents our application, “Money”,
can handle, and what class (which should be a subclass of <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code>) handles the document. In this case, <em>Money.app</em> edits “Money Documents” with file extension <code class="docutils literal notranslate"><span class="pre">.mon</span></code>, using the class <code class="docutils literal notranslate"><span class="pre">Document</span></code>, which we haven’t implemented yet. This is a simplified property
list, but it works. Look at <a class="reference external" href="https://github.com/gnustep/tests-examples/blob/master/gui/Ink/InkInfo.plist"><code class="docutils literal notranslate"><span class="pre">InkInfo.plist</span></code></a> from the <em>Ink</em> example application for a better example.</p>
<p>Now, we need to create the class <code class="docutils literal notranslate"><span class="pre">Document</span></code>, and
the window for each document. Open Gorm, choose “Document→New
Empty”. Drag a window out of the palettes. We won’t do anything in the window yet – we’ll flesh out the UI in the next section.</p>
<p>Look at the classes in the Gorm main window, and use “Classes→Create
Subclass” to create a subclass of <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code>, called <code class="docutils literal notranslate"><span class="pre">Document</span></code>.</p>
<p><span id="AEN936"></span></p>
<p><strong>Figure 4-34. Create <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> subclass</strong></p>
<p><img alt="" src="../../_images/Money-03.jpg" /></p>
<p>Don’t instantiate it. Instead, we’ll make it the owner of the document
window (in <u>Objects</u>). Click the NSOwner in the Gorm main window, and select the <u>Attributes</u> pane in the inspector. Choose the <code class="docutils literal notranslate"><span class="pre">Document</span></code> class.</p>
<p><span id="AEN942"></span></p>
<p><strong>Figure 4-35. Set document as NSOwner of window</strong></p>
<p><img alt="" src="../../_images/Money-04.jpg" /></p>
<p><img alt="" src="../../_images/Money-05.jpg" /></p>
<p>Now, the NSOwner is the class of Document. I need to connect the
<code class="docutils literal notranslate"><span class="pre">_window</span></code> outlet of NSOwner (an instance of <code class="docutils literal notranslate"><span class="pre">Document</span></code>) to the window,</p>
<p><span id="AEN951"></span></p>
<p><strong>Figure 4-36. Connect NSOwner to window</strong></p>
<p><img alt="" src="../../_images/Money-06.jpg" /></p>
<p><img alt="" src="../../_images/Money-07.jpg" /></p>
<p>and the set the delegate of window to the NSOwner (an instance of <code class="docutils literal notranslate"><span class="pre">Document</span></code>).</p>
<p><span id="AEN960"></span></p>
<p><strong>Figure 4-37. Connect delegate to NSOwner</strong></p>
<p><img alt="" src="../../_images/Money-08.jpg" /></p>
<p><img alt="" src="../../_images/Money-09.jpg" /></p>
<p>Finally, use “Classes→Create Class Files” to create the files of
class <code class="docutils literal notranslate"><span class="pre">Document</span></code>. Save them to Document.m and Document.h. Save the Gorm
file into “Document.gorm”.</p>
</section>
<section id="loading-the-user-interface">
<h2>Loading the user interface<a class="headerlink" href="#loading-the-user-interface" title="Permalink to this heading">#</a></h2>
<p>Now, we have five files: Money.gorm, MoneyInfo.plist, Document.h, Document.m and
Document.gorm (which is actually a special kind of directory, called a “bundle”).</p>
<p><code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code> knows what class to use because it is written in the
property list file. How does <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> (or its subclass, <code class="docutils literal notranslate"><span class="pre">Document</span></code>) know what the document viewer is? In this case, <em>Money.app</em>’s document viewer is <code class="docutils literal notranslate"><span class="pre">Document.gorm</span></code>. The simplest way to tell <code class="docutils literal notranslate"><span class="pre">Document</span></code> about <code class="docutils literal notranslate"><span class="pre">Document.gorm</span></code> is to implement the method
<code class="docutils literal notranslate"><span class="pre">-windowNibName:</span></code> in <code class="docutils literal notranslate"><span class="pre">Document</span></code>.</p>
<p>The Document files that Gorm created for us
won’t work perfectly. Enter the following code instead:</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.h:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="cp">#import &lt;AppKit/AppKit.h&gt;</span>
<span class="cp">#import &lt;AppKit/NSDocument.h&gt;</span>

<span class="k">@interface</span> <span class="nc">Document</span> : <span class="nc">NSDocument</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Document.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="cp">#import &quot;Document.h&quot;</span>

<span class="k">@implementation</span> <span class="nc">Document</span>

<span class="p">-</span> <span class="p">(</span><span class="bp">NSString</span><span class="o">*</span><span class="p">)</span> <span class="nf">windowNibName</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">@&quot;Document.gorm&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@end</span>
</pre></div>
</div>
<p>I deleted the extra code inherited from <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code>. Include
<code class="docutils literal notranslate"><span class="pre">&lt;AppKit/NSDocument.h&gt;</span></code> explicitly in the header file because <code class="docutils literal notranslate"><span class="pre">&lt;AppKit/AppKit.h</span></code> doesn’t
include it (at least on some platforms). The most important part is that I return the name of the
document interface, <code class="docutils literal notranslate"><span class="pre">Document.gorm</span></code>, so that <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> can find where
the interface are.</p>
<p>Here are the rest of the files:</p>
<p><code class="docutils literal notranslate"><span class="pre">main.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="cp">#import &lt;AppKit/AppKit.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">NSApplicationMain</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">GNUmakefile:</span></code></p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="cp">include $(GNUSTEP_MAKEFILES)/common.make</span>

<span class="nv">APP_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Money
<span class="nv">Money_HEADERS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Document.h
<span class="nv">Money_OBJC_FILES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>main.m<span class="w"> </span><span class="se">\</span>
<span class="w">                   </span>Document.m
<span class="nv">Money_RESOURCE_FILES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>MoneyInfo.plist<span class="w"> </span><span class="se">\</span>
<span class="w">                       </span>Money.gorm<span class="w"> </span><span class="se">\</span>
<span class="w">                       </span>Document.gorm
<span class="nv">Money_MAIN_MODEL_FILE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Money.gorm

<span class="cp">include $(GNUSTEP_MAKEFILES)/application.make</span>
</pre></div>
</div>
<blockquote>
<div><p>Here is the source code:
<a class="reference external" href="http://gnustep.made-it.com/GSPT/Money/Money-src.tar.gz">Money-src.tar.gz</a></p>
</div></blockquote>
<p>Compile the application with <code class="docutils literal notranslate"><span class="pre">make</span></code>, and run it with <code class="docutils literal notranslate"><span class="pre">openapp</span> <span class="pre">./Money.app</span></code>.</p>
<p>Once the application starts up, you will see only the menu. Use
“Document→New” to open a new document. A empty window will show up.
You can keep as many documents as you want. The menu items will be
automatically enabled depending on the existance of the document. Most
menu doesn’t work yet.</p>
<p>GNUstep offers a great framework for document-based applications. With GNUstep, we only need to focus on the document itself, and don’t need to
worry about how to manage the multiple documents/windows. GNUstep will
handle it perfectly.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="4.2.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">4.2 - Document Editor</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">4 - Money</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, GNUstep contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">4.1 - The Basics</a><ul>
<li><a class="reference internal" href="#skeleton-user-interface">Skeleton user interface</a></li>
<li><a class="reference internal" href="#loading-the-user-interface">Loading the user interface</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=172f29ee"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/design-tabs.js?v=36754332"></script>
    </body>
</html>